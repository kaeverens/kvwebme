/*
 * jQuery 3d Carousel plugin
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * tested with jQuery 1.4.2
 * written by Kae Verens: kae@webworks.ie
 * version: 1.2
 */
(function(a){a.fn.k3dCarousel=function(b){return this.each(function(){var c=0,d,e,f,g,h,i,j,k;positions=[],iter=0,w=this.offsetWidth,items=a(this).css("position","relative").find("img").css({position:"absolute",opacity:0,display:"block"}),settings={r:w*0.3,cX:w/2,cY:this.offsetHeight/2,sT:1e3,wT:2e3,a:0,d:1,p:1},a(this).mouseover(function(){if(!settings.d)return;settings.od=settings.d,settings.d=0,clearTimeout(j)}).mouseout(function(){if(settings.d||!settings.od)return;settings.d=settings.od,l()}),b&&a.extend(settings,b),settings.a.length==2&&(i=function(a){settings.d=a,clearTimeout(j),l()},a("<div style=\"cursor:pointer;position:absolute;left:5px;top:5px\" class=\"left\" />").html(settings.a[0]).click(function(){i(-1)}).appendTo(this),a("<div style=\"cursor:pointer;position:absolute;right:5px;top:5px\" class=\"right\" />").html(settings.a[1]).click(function(){i(1)}).appendTo(this)),items.each(function(b,c){c.oW=c.offsetWidth,c.oH=c.offsetHeight,a(c).css({left:settings.cX-c.oH/2,top:0})}),g=items.length,h=Math.PI/(g/2);for(;c<g;++c)d=Math.sin(h*c),positions.push({l:settings.cX+Math.cos(h*c)*settings.r,z:parseInt(50*d+50),t:d*10+10,o:0.45*d+0.55,m:0.4*d+0.6}),items[c]=a(items[c]);function l(){for(c=0;c<g;++c){var a=(c+iter)%g;e=positions[c],f=e.m*items[a][0].oW,items[a].animate({left:e.l-f/2,opacity:e.o,top:e.t,width:f,height:e.m*items[a][0].oH},settings.sT).css("z-index",e.z)}iter+=settings.d,iter<0&&(iter+=g),j=setTimeout(l,settings.wT+settings.sT)}l()})}})(jQuery)
